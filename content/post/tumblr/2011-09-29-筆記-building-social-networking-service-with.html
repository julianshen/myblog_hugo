---
date: "2011-09-29T01:11:11Z"
tags:
- Cloud
- Heroku
- Social network
- Web Dev
title: '[筆記] Building social networking service with DIASPORA* on Heroku'
tumblr_url: http://blog.jln.co/post/10770579742/筆記-building-social-networking-service-with
---
<div class="posterous_autopost"><div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/temp-2011-09-28/yDcrGkHznnvkFfkhEjoabkEryHGaevvynvtyCEGosBbuinEijbvqtaehCjpq/_2011-09-29_12.03.19.png.scaled1000.png"><img alt="_2011-09-29_12" height="392" src="http://posterous.com/getfile/files.posterous.com/temp-2011-09-28/yDcrGkHznnvkFfkhEjoabkEryHGaevvynvtyCEGosBbuinEijbvqtaehCjpq/_2011-09-29_12.03.19.png.scaled500.png" width="500"/></a> </div>   <p>Looks familiar? It&rsquo;s not Google+. It&rsquo;s <a href="https://joindiaspora.com/">DIASPORA</a>. An open source project that implements a distributed social networking service. This project was announced on APRIL 24, 2010 (Just right after Facebook f8 2010 that is at APRIL 21). Alpha version was released at NOV 23, 2010 (two days before my birthday :P). </p>  <p>According to <a href="http://mashable.com/2010/05/28/zuckerberg-diaspora/">this</a>, Mark Zuckerbug also donated to it just because it&rsquo;s a cool idea.</p>  <p>It&rsquo;s built on Ruby on rails. So it might be not so difficult to port it to Heroku platform which is a nice RoR host (althrough it still took me some time). It might be easier than build from scratch on a Linux. </p>  <p>I&rsquo;m a newbie to these two (Heroku and DIASPORA). I&rsquo;m also not familar with RoR. Here records steps I tried. </p>  <p><span style="font-size: medium;"><strong>create an application on heroku</strong></span></p>  <p>First, you need to create an application on Heroku. There are several platform stack on Heroku. <a href="http://devcenter.heroku.com/articles/cedar">Cedar stack</a> might be the newest and most powerful one. It supports several languages and frameworks. And It also makes it very easy to deploy RoR applications. </p>  <p>You need to <a href="http://devcenter.heroku.com/articles/heroku-command">install heroku CLI</a> before creating an application. And use &ldquo;<em>heroku login</em>&rdquo; to login to your heroku account.</p>  <p>Run the following command to create a new cedar application (assume application name is &ldquo;mysocialy&rdquo;) &ndash;</p>  <blockquote class="posterous_short_quote">  <p><em>heroku create &ndash;stack cedar mysocialy</em></p>  </blockquote>  <p>After the application created, you&rsquo;ll have a url <em>&ldquo;http://mysocialy.herokuapp.com/&rdquo;</em> for your site. And a git repository: <em><a href="mailto:git@heroku.com">git@heroku.com</a>:mysocialy.git</em></p>  <p><span style="font-size: medium;"><em><strong>import source codes</strong></em></span></p>  <p>Get DIASPORA* source codes from git hub:</p>  <blockquote class="posterous_short_quote">  <p><em>git clone git://github.com/diaspora/diaspora.git</em></p>  </blockquote>  <p>Get your source codes from Heroku git repository (you&rsquo;ll get an empty folder):</p>  <blockquote class="posterous_short_quote">  <p><em>git clone </em><em><a href="mailto:git@heroku.com">git@heroku.com</a>:mysocialy.git</em></p>    </blockquote>  <p>If you have trouble to download from Heroku. Try to use &ldquo;<em>heroku keys:add</em>&rdquo; to add your ssh public key and try again.</p>  <p>Copy all files except &ldquo;.git&rdquo; folder from &ldquo;diaspora&rdquo; to &ldquo;mysocialy&rdquo;.</p>  <p><span style="font-size: medium;"><em><strong>Initial configuration</strong></em></span></p>  <p>Make new configuration files from example.</p>  <blockquote class="posterous_short_quote">  <p><em>cd config</em></p>  <p><em>mv application.yml.example application.yml  </em></p>  <p><em>mv database.yml.example database.yml</em></p>  </blockquote>  <p>Edit application.yml. Make &ldquo;pod_url&rdquo; to your host. In this case:</p>  <blockquote class="posterous_short_quote">  <p><em>pod_url: &ldquo;http://mysocialy.herokuapp.com/&rdquo;</em></p>  </blockquote>  <p><em><strong><span style="font-size: medium;">Deploy codes</span></strong></em></p>  <p>Add and commit files:</p>  <blockquote class="posterous_short_quote">  <p><em>git add .</em></p>  <p><em>git commit -am &lsquo;initial import&rsquo;</em></p>  </blockquote>  <p>Push them to Heroku</p>  <blockquote class="posterous_short_quote">  <p><em>git push origin master</em></p>  </blockquote>  <p>The coolest thing that Heroku does is that it makes deploy codes so easy. All you need to do is to push your codes to its git repository. And it could also install all related modules for you (that is configured in Gemfile). Super easy.</p>  <p>Ok, I must admit that I lie a little bit. There might be some problems. After I pushes all codes to Heroku, I found there is an error that it couldn&rsquo;t find 'pg&rsquo; (postgresSQL). Looks like it does not install into gem.</p>  <p>I found the answer that it might be problem with gem version. Need to run &ldquo;<em>bundle install</em>&rdquo; at local.  This will generate a new Gemfile.lock. Push this new file to Heroku might solve this problem</p>  <p><em><span style="font-size: medium;"><strong>Ok, that&rsquo;s all?</strong></span></em></p>  <p>Not sure if I missed anything (I might). Anyway, what I did is alive at &ldquo;<em><a href="http://mysocialy.herokuapp.com/">http://mysocialy.herokuapp.com/</a>&rdquo;.</em></p></div>
