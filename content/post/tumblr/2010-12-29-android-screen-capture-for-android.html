---
date: "2010-12-29T23:03:34Z"
tags:
- Android
- Mobile Dev
title: '[Android] Screen capture for Android'
tumblr_url: http://blog.jln.co/post/2512711219/android-screen-capture-for-android
---
<div class="posterous_autopost"><p>雖然Android可以透過ddms抓screen shot, 不過這樣畢竟沒iOS方便, iOS只要按個熱鍵就可以抓了, 不用接著電腦</p>  <p>要在Android上實現這功能其實也不難(不過,應該只能跑在rooted device吧?本文介紹的是直接跟AOSP一起build用platform certificate)</p>  <p>第一個直覺想到的是直接access framebuffer, 不過這樣實在太醜了, 我想要做的是直接利用Android既有的framework</p>  <p>想到framebuffer在往上一層就是surfaceflinger了, 稍微掃一下code果然發現有captureScreen這種東西, 所以下一步就是grep一下找看看範例囉!!沒想到, 運氣真好, 一下子就在 <em><strong>frameworks/base/services/surfaceflinger/tests/screencap </strong></em>這邊找到範例, 還是一個standalone的程式</p>  <p>不過我想做的是直接收一個Intent就可以把screen capture到SD卡, 所以這個東西還要做進一步包裝, 於是動手把它包裝成JNI, 並寫了一個簡單的BroadcastReceiver去呼叫他&hellip;..花不到一個小時&hellip;搞定!!! XD</p>  <p><a href="https://github.com/julianshen/ScreenCap">Source在這邊</a></p>  <p>不過, 這不是我原本想做的東西&hellip;.繼續改&hellip; :P</p></div>
