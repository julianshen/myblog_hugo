---
date: "2011-09-23T05:27:32Z"
tags:
- Cloud
- Facebook
- Social network
title: 在Heroku上建立一個以Node.js開發的Facebook應用程式
tumblr_url: http://blog.jln.co/post/10530659557/在heroku上建立一個以nodejs開發的facebook應用程式
---
<div class="posterous_autopost"><p>這篇算筆記, 有可能會有一些失落環節在, 主要從create Facebook application到可以在local端執行</p>  <p>Facebook這月稍早時跟Heroku合作, 讓建立一個Facebook應用程式(含後端)更加方便: <a href="http://developers.facebook.com/blog/post/558/">http://developers.facebook.com/blog/post/558/</a> (有些步驟可以從這看)</p>  <p>我選了Node.js當做開發的平台, 以下就是我的步驟:</p>  <p><strong>建立Facebook application</strong></p>  <p>首先到Facebook application page <a href="https://developers.facebook.com/apps/">https://developers.facebook.com/apps/</a> 建立一個新的應用程式</p>  <p>跟以往有點不太一樣的是, 在Application settings裡面多了一個&quot;Cloud Services&quot; -</p>  <div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/BDvdiEImAAhdFjwgFIvsdiEjirfmjdjcjntJBkIqeyIuebqojvhpAvgHfEpE/_2011-09-21_4.33.20.png.scaled1000.png"><img alt="_2011-09-21_4" height="234" src="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/BDvdiEImAAhdFjwgFIvsdiEjirfmjdjcjntJBkIqeyIuebqojvhpAvgHfEpE/_2011-09-21_4.33.20.png.scaled500.png" width="500"/></a> </div>   <p>目前只有Heroku可以選, 我猜以後搞不好會有更多合作對象吧</p>  <p>選了Provider之後, 接下來就要選擇平台, 目前有PHP, Python, Ruby, Node.js可選, 選擇算蠻多的了, 這邊選Node.js</p><div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/hpJIEgltHgcipFzBHplDekcrqltlgpFIwazgECxoamGjIaaynpzkHbeJtdrl/_2011-09-21_4.33.34.png.scaled1000.png"><img alt="_2011-09-21_4" height="257" src="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/hpJIEgltHgcipFzBHplDekcrqltlgpFIwazgECxoamGjIaaynpzkHbeJtdrl/_2011-09-21_4.33.34.png.scaled500.png" width="500"/></a> </div>   <p>經過一些有的沒的之後, 就會有這畫面, 這邊已經完成這個應用程式的基本雛形了</p>  <div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/zurDvaqBIrlJCHmdoGFIsFqgxhIImBDIFHrmwxlmralAzGiwzAgmhsiwedJv/_2011-09-21_4.34.54.png.scaled1000.png"><img alt="_2011-09-21_4" height="441" src="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/zurDvaqBIrlJCHmdoGFIsFqgxhIImBDIFHrmwxlmralAzGiwzAgmhsiwedJv/_2011-09-21_4.34.54.png.scaled500.png" width="500"/></a> </div>   <p><strong>設定你的heroku應用程式</strong></p>  <p>到 <a href="https://api.heroku.com/myapps">https://api.heroku.com/myapps</a> 去設定你的應用程式, 在這邊你可以修改應用程式名稱, 不過比較麻煩的是, 這邊的修改並不會同步回Facebok, 因此修改後還是需要回Facebook去更改相關設定:</p>  <div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/stfjuojfjhffmFIxjFxngtFixshyltfzCdGpmqmCHdhymokGGpHmIIGloDew/_2011-09-21_4.36.09.png.scaled1000.png"><img alt="_2011-09-21_4" height="222" src="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/stfjuojfjhffmFIxjFxngtFixshyltfzCdGpmqmCHdhymokGGpHmIIGloDew/_2011-09-21_4.36.09.png.scaled500.png" width="500"/></a> </div>   <p><strong>在你的電腦執行</strong></p>  <p>一般在程式沒完成前大多都不會想直接佈署上去, 能在自己電腦先執行驗證過是比較容易抓蟲的</p>  <p>以下是先需要安裝的</p>  <p><em><strong>heroku command line -</strong></em></p>  <p>heroku是用gem安裝的, 所以安裝前要先確認你電腦有沒安裝Ruby, heroku安裝方法很簡單, 只要執行 &ldquo;gem install heroku&rdquo;</p>  <p>安裝好後先用&quot;heroku keys&quot;看看有沒存在的key, 有的話可能會讓之後要用git抓資料有問題, 有的話用&quot;heoku keys:remove&quot;先移除, 這樣login會產生新的public key</p>  <p>用&quot;heroku login&quot;登入heroku, 第一次使用可能會要求產生public key</p>  <p>登入後就可以用&quot;git clone <a href="mailto:git@heroku.com">git@heroku.com</a>:ff8.git&quot;抓下原始碼(ff8是heroku application name)</p>  <p><em><strong>node.js -</strong></em></p>  <p>這當然是必須安裝的(在這例子), 如果是在mac上, 又是brew的使用者, 那只要用&quot;brew install node&quot;即可</p>  <p><strong><em>npm (node package manager) -</em></strong></p>  <p>安裝方式很簡單, 只要&quot;curl <a href="http://npmjs.org/install.sh">http://npmjs.org/install.sh</a> | sh&quot;</p>  <p>安裝好後, 在git clone下來的目錄下&quot;npm install&quot;, 它自然會裝好所有所需的package</p>  <p><strong>foreman -</strong></p>  <p>文件裡面有建議裝, 不過由於這範例只是一個單純的web, 並沒其他worker, 可以不裝</p>    <p><em><strong>設定Facebook application</strong></em></p>  <p>因為要在本地端執行而不是heroku的雲, 所以要把url都指向本地端, 像這樣:</p>  <div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/FqEEloboEvDmoDgktlnevAmioattEtyCttJpfebonwoDcfllFBmCDhjAHhsD/_2011-09-23_5.18.47.png.scaled1000.png"><img alt="_2011-09-23_5" height="122" src="http://posterous.com/getfile/files.posterous.com/temp-2011-09-22/FqEEloboEvDmoDgktlnevAmioattEtyCttJpfebonwoDcfllFBmCDhjAHhsD/_2011-09-23_5.18.47.png.scaled500.png" width="500"/></a> </div> <em><strong>設定環境變數</strong></em>  <p>export FACEBOOK_APP_ID=122348222122778</p>  <p>export FACEBOOK_SECRET=1ba1beed9f7b5be9192bf4540c231234</p>  <p>export PORT=5000</p>  <p>(我跑在5000)</p>  <p>如果使用foreman, 就把這些寫在.env中</p>    <p><strong>執行</strong></p>  <p>&ldquo;node web.js&quot;就可以將server跑起來(或是foreman start), 然後到http://localhost:5000/就可以看到結果 </p></div>
