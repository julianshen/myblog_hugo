---
date: "2011-05-01T21:26:35Z"
tags:
- Android
- Facebook
- Mobile Dev
- Social network
title: Recognize your friend with Face.com
tumblr_url: http://blog.jln.co/post/5099367037/recognize-your-friend-with-facecom
---
<div class="posterous_autopost"><p>替照片上的每個人都加上標籤(tag)是一個蠻好用的功能, 這可以方便你找到有某人的照片, 或是一群人在某時的合照, 如果善加利用是相當好用的功能, 目前主流的幾個相片服務像是Flickr, Facebook, Picasa等等, 都有這樣的功能</p>  <p>其中以Picasa的功能最為先進, 它可以自動幫你把你所有照片裡的朋友都挑出來標示, 不像Flickr跟Facebook就只能手動</p>  <p>如果每張照片都只能手動標示的話, 標示完所有的照片是很累人的, 更何況可能還有很多未標示的舊照片, 就這點來說, Picasa就強勁很多, 至於Facebook和Flickr呢? 所幸有<a href="http://face.com/">Face.com</a></p>  <p>Face.com是一個做自動標示的服務, 其實這樣講有點狹隘, 自動標示照片的服務只是它其中一個產品 - <a href="http://apps.facebook.com/photo_tagger/?face_ref=pt_facedotcom_app_arrow&amp;utm_campaign=viral&amp;utm_source=face&amp;utm_medium=website">PhotoTagger</a>, PhotoTagger的用處就有點像Picasa做的一樣, 自動幫你把照片的人物找出來做標示:</p>  <div class="p_embed p_image_embed"> <a href="http://posterous.com/getfile/files.posterous.com/temp-2011-05-01/yceenqFJnquzwdCACHGrskpJvwikahIeHDDgouzDJbozfcxmBvhtJjHyvDdi/_2011-05-01_8.59.35.png.scaled1000.png"><img alt="_2011-05-01_8" height="585" src="http://posterous.com/getfile/files.posterous.com/temp-2011-05-01/yceenqFJnquzwdCACHGrskpJvwikahIeHDDgouzDJbozfcxmBvhtJjHyvDdi/_2011-05-01_8.59.35.png.scaled500.png" width="500"/></a> </div> 當然準確度不會到100%那麼高啦, 不過加上手動輔助的話, 已經可以節省不少功夫了  <p>此外還有PhotoFinder和CelebrityFindr&hellip;.不過這些並不是重點, 它真正比較強大的是, 它乾脆把它的Face detection和Face recogintion 的API開放出來, 讓你可以利用它們的雲端運算做出自己的應用</p>  <p>它的API是以REST的形態提供的, 支援的後端服務有Facebook, Flickr, Twitter, 基本的API也大致相當完整, train, detect, recongnize, tag等等, 如果是做Facebook相關的應用, 甚至可以省略過train的部份, 就可以達到辨識的效果</p>  <p>當然, 剛剛的應用像是PhotoTagger都是以拍完後的照片為目標而做的, 如果拍照完後馬上就可以找出有哪些人可以tag的話, 那就更棒了</p>  <p>為了實驗這個我寫了一個簡單的Android app - <a href="http://dl.dropbox.com/u/2789919/Face.me.apk">Face.me</a> , 只要拿著Android手機對著你朋友拍一張(按螢幕畫面), 它就會利用Face.com去找出你這朋友的名字 (可以從連結下載APK安裝, 因為Camera部分不熟, 寫的不太好, 可能會有bug, 就不open source了 :P) </p>  <p>這App利用了一個open source的Face.com的Java lib叫<a href="https://github.com/mhendred/face4j">face4j</a>, 基本上這lib移植到Android上並不困難, 它用到一些apache commons, http的library, 只要把這些含入就可以</p>  <p>要開發這個, 首先你必須要有Facebook API key和Face.com的API key, Face.com的API key可以到<a href="http://developers.face.com/new-application/">這裡</a>註冊個新的, 另外還得把Facebook的API key和secret註冊到Face.com上(看你信不信任它囉)</p>  <p>Facebook API的部份, 我是用<a href="https://github.com/facebook/facebook-android-sdk">Facebook Android SDK</a>去開發的, 其實也沒用到幾個API, 大致上只有login和取得自己的UID而已</p>  <p>另外由於face4j在reconigize這個method只支援檔案跟url兩種方式, 我另外修改了一個支援input stream的:</p>  <p><a href="https://gist.github.com/950492.js?file=gistfile1">https://gist.github.com/950492.js?file=gistfile1</a></p>      <p>剩下的部份就簡單了, 在Camera.takePicture的第三個參數的PictureCallback.onPictureTaken裡加上:</p>  <p>  <script src="https://gist.github.com/950494.js?file=gistfile1.java"></script></p>  </div>
