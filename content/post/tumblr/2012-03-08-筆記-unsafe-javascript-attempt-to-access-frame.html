---
date: "2012-03-08T01:09:02Z"
tags:
- Facebook
- javascript
- Web Dev
title: '[筆記] "Unsafe JavaScript attempt to access frame with URL"  error with Facebook
  Javascript API'
tumblr_url: http://blog.jln.co/post/18905566352/筆記-unsafe-javascript-attempt-to-access-frame
---
<div class="posterous_autopost"><p>The following example shows how to create a simple Facebook login button with Facebook javascript API:</p>  <p>  <script src="https://gist.github.com/1994297.js?file=gistfile1.phtml"></script></p>  <p>Normally, this page would be reloaded if user finished authorized your app. But it won&rsquo;t be reloaded in Chrome due to the follwing error:</p>  <blockquote>  <p><span style="color: #ff0000;">Unsafe JavaScript attempt to access frame with URL</span> <a href="https://s-static.ak.fbcdn.net/connect/xd_proxy.php?version=3#cb=f363e58d9">https://s-static.ak.fbcdn.net/connect/xd_proxy.php?version=3#cb=f363e58d9</a>&amp;origin=http%3A%2F%2Fwww.ab.com%2Ffcb27588&amp;relation=opener&amp;transport=postmessage&amp;frame=fac4c0f18&amp;access_token=AAAEHZBpoK3B0BALv8Cf96gaKEnn4ZBtXgjCOQCFFhVDL4K0rZAE2NGDcqZCPlZByNNKEDmYSGKHQv8jAUM2yGZCHkOcyXUKhoZD&amp;expires_in=0&amp;signed_request=g7sYd_XQx-EBPtQQGk-0ISRMrUDnT4L4WHAmlNsVFBU.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImNvZGUiOiJBUURKYkZBNjZuemduSDBBN0dXWmd2SGxZZkQxQVp4Qm1MSnc0Z3ppUV9FQ25VeEYyZmcyTmJGcFh3UHZDeWhyYnFrT1RxNmRVc2xsb0d4dlFCd290UjRyV0ZsSnJtVjFoNy1QUTlJbTRROXh3MmNKMGU1b0NReWtmT1ZZcXhMUDRVRldVSDgwVU5ic1BLTHdyNk80cFlSVVItQzNIYjhyRWgxek40ZFEzSkpreXhBcU1KSHljcWxETzh2dF96T3ZpN0EiLCJpc3N1ZWRfYXQiOjEzMzExMzg3MjQsInVzZXJfaWQiOiIxMTI5MjgzNDM3In0 from frame with URL <a href="http://www.ab.com/login.html">http://www.ab.com/login.html</a>. Domains, protocols and ports must match.</p>  </blockquote>  <p>Some people use FB.getLoginStatus() to check if user authorized app at page loaded. If page could be reloaded, it&rsquo;s no problem. However, in this case, it&rsquo;s not. </p>  <p>There are several questions on StackOverflow related to this:</p>  <p><a href="http://stackoverflow.com/questions/3577947/facebook-gives-unsafe-javascript-attempt-to-access-frame-with-url-error-in-chr">http://stackoverflow.com/questions/3577947/facebook-gives-unsafe-javascript-attempt-to-access-frame-with-url-error-in-chr</a></p>  <p><a href="http://stackoverflow.com/questions/8013008/facebook-authentication-unsafe-javascript-attempt-to-access-frame-with-url">http://stackoverflow.com/questions/8013008/facebook-authentication-unsafe-javascript-attempt-to-access-frame-with-url</a></p>  <p><a href="http://stackoverflow.com/questions/3010170/unsafe-javascript-attempt-to-access-frame-with-url-error-being-continuously">http://stackoverflow.com/questions/3010170/unsafe-javascript-attempt-to-access-frame-with-url-error-being-continuously</a></p>  <p>But none of these solves my problem. I don&rsquo;t want to solve this with introduce PHP sdk. I would like to solve it with pure front end codes. </p>  <p>Therefore, I find 3 solutions:</p>  <ol><li>Ignore the error and register login event to solve the problem:</li>  <li>Add attribute &ldquo;show-faces=&quot;true&rdquo;&ldquo; to &lt;fb:login-button&gt; to solve</li>  <li>Add attribute &quot;render-in-iframe=&quot;true&rdquo;&ldquo; to &lt;fb:login-button&gt; to solve. This is a bad idea since this is an undocumented attribute.</li>  </ol><p>In solution 2 and 3, login-button seems to be placed into an iframe. And 3 would display an incomplete login button (bug?)</p>  <ol></ol></div>
